"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[667],{331:(e,s,t)=>{t.r(s),t.d(s,{default:()=>Oe});var c=t(2791),a=t(3855),r=t(184);const o=e=>{let{title:s,style:t}=e;return(0,r.jsx)("h2",{className:t,children:s})};var d=t(5125);const l="ProductsItem_cardContainer__Ho9Ps",n="ProductsItem_cardHeadContainer__mQH6j",i="ProductsItem_cardCategoryName__tWROl",_="ProductsItem_addProductBtn__FlW25",u="ProductsItem_addBtnIcon__D7JeO",m="ProductsItem_recommendWrapper__atAvR",h="ProductsItem_labelRecommend__ZlNgg",p="ProductsItem_labelNotRecommended__wZIIp",x="ProductsItem_recommendText__tCLoD",g="ProductsItem_singleCardTitle__-ILEZ",j="ProductsItem_cardRunningIcon__CZ0xb",N="ProductsItem_cardHeaderWrapper__D6Zzb",w="ProductsItem_cardProductStats__0Ausm",P="ProductsItem_cardProdStatItem__CpHza",v="ProductsItem_cardProdStatItemText__1Sjmb",y="ProductsItem_warning__JGZAz",C="ProductsItem_highlightedText__DiAzj",b="ProductsItem_notFoundText__zpC8e",S="ProductsItem_productItem__rV6k2",k={getProducts:e=>e.products.productList,getIsLoading:e=>e.products.isLoading,getProductsCategories:e=>e.products.productsCategories,getFilter:e=>e.products.filter,getCurrentProduct:e=>e.products.currentProduct,getFilteredProducts:e=>e.products.filteredProducts};var f=t(4217);const I=e=>{let{onOpenModal:s,filterByRecommended:t,filterByBloodType:c}=e;const o=(0,a.v9)(k.getProducts),I=(0,a.v9)(f.dy).blood,B=()=>0===o.length?o:c&&t?o.filter((e=>{let{groupBloodNotAllowed:s}=e;return s[I]})):c&&!t?o.filter((e=>{let{groupBloodNotAllowed:s}=e;return!s[I]})):o;return 0===B().length?(0,r.jsxs)("div",{className:y,children:[(0,r.jsxs)("p",{className:b,children:[(0,r.jsx)("span",{className:C,children:"\u041d\u0430 \u0436\u0430\u043b\u044c, \u0434\u043b\u044f \u0432\u0438\u0431\u0440\u0430\u043d\u0438\u0445 \u0432\u0430\u043c\u0438 \u0444\u0456\u043b\u044c\u0442\u0440\u0456\u0432 \u043f\u0440\u043e\u0434\u0443\u043a\u0442\u0456\u0432 \u043d\u0435 \u0437\u043d\u0430\u0439\u0434\u0435\u043d\u043e \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0456\u0432."})," ","\u0412\u0438 \u043c\u043e\u0436\u0435\u0442\u0435 \u0440\u043e\u0437\u0433\u043b\u044f\u043d\u0443\u0442\u0438 \u0456\u043d\u0448\u0456 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0438 \u043f\u043e\u0448\u0443\u043a\u0443, \u0449\u043e\u0431 \u0437\u043d\u0430\u0439\u0442\u0438 \u043f\u043e\u0442\u0440\u0456\u0431\u043d\u0438\u0439 \u043f\u0440\u043e\u0434\u0443\u043a\u0442. \u041d\u0430\u0448 \u0430\u0441\u043e\u0440\u0442\u0438\u043c\u0435\u043d\u0442 \u0448\u0438\u0440\u043e\u043a\u0438\u0439 \u0456 \u0434\u043b\u044f \u0432\u0430\u0441 \u043c\u0430\u0442\u0438 \u043c\u043e\u0436\u043b\u0438\u0432\u0456\u0441\u0442\u044c \u0437\u043d\u0430\u0439\u0442\u0438 \u0431\u0456\u043b\u044c\u0448\u0435 \u0432\u0430\u0440\u0456\u0430\u043d\u0442\u0456\u0432, \u044f\u043a\u0456 \u0432\u0456\u0434\u043f\u043e\u0432\u0456\u0434\u0430\u044e\u0442\u044c \u0432\u0430\u0448\u0438\u043c \u043f\u043e\u0442\u0440\u0435\u0431\u0430\u043c."]}),(0,r.jsx)("p",{className:C,children:"Try changing the search parameters."})]}):B().map((e=>{let{category:t,calories:c,title:a,weight:o,_id:y,groupBloodNotAllowed:C}=e;return(0,r.jsx)("li",{"data-id":y,className:S,children:(0,r.jsxs)("div",{className:l,children:[(0,r.jsxs)("div",{className:n,children:[(0,r.jsx)("div",{className:i,children:"\u0414\u0456\u0454\u0442\u0430"}),(0,r.jsxs)("div",{className:m,children:[(0,r.jsx)("span",{className:C[I]?h:p}),(0,r.jsx)("p",{className:x,children:C[I]?"\u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u043e\u0432\u0430\u043d\u043e":"\u041d\u0435 \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u043e\u0432\u0430\u043d\u043e"})]}),(0,r.jsxs)("button",{type:"button",className:_,onClick:s,children:["\u0414\u043e\u0434\u0430\u0442\u0438",(0,r.jsx)("svg",{className:u,width:"16",height:"16",children:(0,r.jsx)("use",{href:d.Z+"#arrow_add_icon"})})]})]}),(0,r.jsxs)("div",{className:N,children:[(0,r.jsx)("svg",{className:j,width:"24",height:"24",children:(0,r.jsx)("use",{href:d.Z+"#running_stick_figure_icon"})}),(0,r.jsx)("h3",{className:g,children:a})]}),(0,r.jsxs)("div",{className:w,children:[(0,r.jsx)("p",{className:P,children:(0,r.jsxs)("span",{className:v,children:["\u041a\u0430\u043b\u043e\u0440\u0456\u0457: ",c]})}),(0,r.jsx)("p",{className:P,children:(0,r.jsxs)("span",{className:v,children:["\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u044f: ",t]})}),(0,r.jsx)("p",{className:P,children:(0,r.jsxs)("span",{className:v,children:["\u0412\u0430\u0433\u0430: ",o]})})]})]})},y)}))},B="FilterProducts_searchLabel__FkkTn",D="FilterProducts_searchIcon__nn4HX",M="FilterProducts_filterBtn__hcT2I",W="FilterProducts_searchField__1sFnJ",F="FilterProducts_clearSearchIcon__F+9OF",A="FilterProducts_clearFilterBtn__R6Yqk";var L=t(4494),E=t(5612);const T=e=>{let{categoryFilter:s}=e;const[t,o]=(0,c.useState)(!0),l=(0,a.I0)();(0,c.useEffect)((()=>{const e=e=>{"Enter"===e.code&&l((0,L.ft)(e.target.value))};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)}),[l]);return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("label",{className:B,children:[(0,r.jsx)("button",{type:"button",className:M,children:(0,r.jsx)("svg",{className:D,width:"18",height:"18",children:(0,r.jsx)("use",{href:d.Z+"#search_icon"})})}),!t&&(0,r.jsx)("button",{className:A,type:"button",onClick:e=>{if(e.currentTarget.nextElementSibling.value="",o(!0),l((0,L.Dg)()),s){const e={category:s};l(E.Z.getFilteredProducts(e))}else l(E.Z.fetchProducts())},children:(0,r.jsx)("svg",{className:F,width:"18",height:"18",children:(0,r.jsx)("use",{href:d.Z+"#close_icon"})})}),(0,r.jsx)("input",{className:W,type:"text",placeholder:"\u041f\u043e\u0448\u0443\u043a",onChange:e=>{""!==e.currentTarget.value?o(!1):o(!0)},onBlur:e=>{l((0,L.ft)(e.currentTarget.value))}})]})})};var Z=t(5984);const R="DropDownSelectors_categoryListWrapper__ML40J",z="DropDownSelectors_dropBtnDown__59GGP",U="DropDownSelectors_dropDownIcon__5aEDt",O="DropDownSelectors_catDropList__YaOVf",Y="DropDownSelectors_categoryItem__7CNZq",H="DropDownSelectors_selectCatBtn__HVorH",V="DropDownSelectors_dropDownAllWrapper__2UmxQ",J="DropDownSelectors_dropAllBtn__FRZLp",Q="DropDownSelectors_allDropList__mm178",G="DropDownSelectors_typeItem__76rCW",X=e=>{let{onCategoryFilterSelect:s,onTypeSelect:t}=e;const[o,l]=(0,c.useState)(!1),[n,i]=(0,c.useState)(!1),[_,u]=(0,c.useState)("\u0412\u0441\u0435"),[m,h]=(0,c.useState)("\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u0457");(0,c.useEffect)((()=>{const e=e=>{"Escape"===e.code&&(l(!1),i(!1))};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)}),[i,l]);const p=(0,a.v9)(k.getProductsCategories),x=e=>{const t=e.currentTarget.dataset.category;s(t),"all"===t&&h("\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u0457"),h(t),l(!1)},g=e=>{const s=e.currentTarget.dataset.type;t(s),j(s),i(!1)},j=e=>{switch(e){case"all":u("\u0412\u0441\u0435");break;case"\u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u043e\u0432\u0430\u043d\u043e":u("\u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u043e\u0432\u0430\u043d\u043e");break;case"\u043d\u0435 \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u043e\u0432\u0430\u043d\u043e":u("\u041d\u0435 \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u043e\u0432\u0430\u043d\u043e")}};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:R,children:[(0,r.jsxs)("button",{type:"button",className:z,onClick:()=>{l(!0),i(!1),o&&l(!1)},value:"Categories",children:[m,(0,r.jsx)("svg",{className:U,width:"18",height:"18",children:(0,r.jsx)("use",{href:d.Z+"#icon-chevron-down"})})]}),o&&(0,r.jsxs)("ul",{className:O,children:[(0,r.jsx)("li",{className:Y,children:(0,r.jsx)("button",{type:"button",className:H,"data-category":"all",onClick:x,children:"\u0412\u0441\u0456 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u0456"})},(0,Z.x0)(5)),p.map((e=>(0,r.jsx)("li",{className:Y,children:(0,r.jsx)("button",{type:"button",className:H,onClick:x,"data-category":e,children:e})},(0,Z.x0)(5))))]})]}),(0,r.jsxs)("div",{className:V,children:[(0,r.jsxs)("button",{type:"button",className:J,onClick:()=>{i(!0),l(!1),n&&i(!1)},children:[_,(0,r.jsx)("svg",{className:U,width:"18",height:"18",children:(0,r.jsx)("use",{href:d.Z+"#icon-chevron-down"})})]}),n&&(0,r.jsxs)("ul",{className:Q,children:[(0,r.jsx)("li",{className:G,children:(0,r.jsx)("button",{type:"button",className:H,onClick:g,"data-type":"all",children:"\u0412\u0441\u0435"})},(0,Z.x0)(5)),(0,r.jsx)("li",{className:G,children:(0,r.jsx)("button",{type:"button",className:H,onClick:g,"data-type":"recommended",children:"\u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u043e\u0432\u0430\u043d\u0456"})},(0,Z.x0)(5)),(0,r.jsx)("li",{className:G,children:(0,r.jsx)("button",{type:"button",className:H,onClick:g,"data-type":"not-recommended",children:"\u041d\u0435 \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u043e\u0432\u0430\u043d\u0456"})},(0,Z.x0)(5))]})]})]})};var q=t(3430);const K="ProductsPage_prodContainer__QPuXY",$="ProductsPage_dropDownContainer__VJh-k",ee="ProductsPage_productsTitle__IauG3",se="ProductsPage_desktopCntrlWrap__OtYxc",te="ProductsPage_cardsWrapper__k697g",ce="ProductsPage_cardsWrapperFiltered__GSUmz",ae="ProductsPage_filtersTitle__MASnC",re="ProductsPage_filtersCtrls__Sl8V6";var oe=t(4164),de=t(5705),le=t(1087);const ne="AddProductSuccess_overlay__bgeXN",ie="AddProductSuccess_successWrap__borPA",_e="AddProductSuccess_closeBasicModal__YLoav",ue="AddProductSuccess_closeBasicModalIcon__jkeXD",me="AddProductSuccess_successData__MrYia",he="AddProductSuccess_successImg__y+iQ6",pe="AddProductSuccess_wellDone__ankeW",xe="AddProductSuccess_kcal__SUwX5",ge="AddProductSuccess_kcalNumber__QwIs1",je="AddProductSuccess_nextBtn__Gd9E-",Ne="AddProductSuccess_linkWrapper__IRdIn",we="AddProductSuccess_link__mTD8S",Pe="AddProductSuccess_linkArrow__vAYUI",ve=t.p+"static/media/avocado.95c6cd4821299887e2bb.png",ye=e=>{let{onCloseModal:s,consumedCalories:t,handleBackdropClick:c}=e;return(0,r.jsx)("div",{className:ne,onClick:c,children:(0,r.jsxs)("div",{className:ie,children:[(0,r.jsx)("button",{type:"button",className:_e,onClick:s,children:(0,r.jsx)("svg",{className:ue,width:"22",height:"22",children:(0,r.jsx)("use",{href:d.Z+"#close_icon"})})}),(0,r.jsxs)("div",{className:me,children:[(0,r.jsx)("img",{src:ve,alt:"Success",className:he}),(0,r.jsx)("p",{className:pe,children:"\u0413\u0430\u0440\u043d\u0430 \u0440\u043e\u0431\u043e\u0442\u0430!"}),(0,r.jsxs)("p",{className:xe,children:["\u041a\u0430\u043b\u043e\u0440\u0456\u0457:"," ",(0,r.jsx)("span",{className:ge,children:t})]}),(0,r.jsx)("button",{type:"button",className:je,onClick:s,children:"\u041d\u0430\u0441\u0442\u0443\u043f\u043d\u0438\u0439 \u043f\u0440\u043e\u0434\u0443\u043a\u0442"}),(0,r.jsxs)("div",{className:Ne,children:[(0,r.jsxs)(le.rU,{to:"/diary",className:we,children:["\u0414\u043e \u0449\u043e\u0434\u0435\u043d\u043d\u0438\u043a\u0430"," "]}),(0,r.jsx)("svg",{width:"16",height:"16",children:(0,r.jsx)("use",{href:d.Z+"#arrow_add_icon",className:Pe})})]})]})]})})},Ce="BasicModalWindow_overlay__s-mcD",be="BasicModalWindow_basicModalContainer__P3nRC",Se="BasicModalWindow_selectedProductDescr__+Yh-+",ke="BasicModalWindow_productCardPopUp__d3+uW",fe="BasicModalWindow_caloriesCount__qECr1",Ie="BasicModalWindow_basicModalSelectedProduct__z2jpB",Be="BasicModalWindow_basicModalFormInput__bpJz9",De="BasicModalWindow_weightLabel__gPTUQ",Me="BasicModalWindow_closeBasicModal__hSwTK",We="BasicModalWindow_closeBasicModalIcon__bsEtp",Fe="BasicModalWindow_basicModalForm__fk1Ur",Ae="BasicModalWindow_selectedProdBtns__d3Fm6",Le="BasicModalWindow_addDiaryBtn__nsOIB",Ee="BasicModalWindow_cancelAddBtn__eWEAQ",Te="BasicModalWindow_kcalNumber__dxhRY";var Ze=t(5119);const Re=document.querySelector("#modal-root"),ze=e=>{let{onCloseModal:s}=e;const[t,o]=(0,c.useState)(0),[l,n]=(0,c.useState)(!1);(0,c.useEffect)((()=>{const e=e=>{"Escape"===e.code&&s()};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)}),[s]);const i=(0,a.I0)(),_=(0,a.v9)(k.getCurrentProduct),u=_.title,m=t*_.calories/100,h=e=>{e.currentTarget===e.target&&s()};return(0,oe.createPortal)(l?(0,r.jsx)(ye,{onCloseModal:s,consumedCalories:m,handleBackdropClick:h}):(0,r.jsx)("div",{className:Ce,onClick:h,children:(0,r.jsxs)("div",{className:be,children:[(0,r.jsx)("button",{type:"button",className:Me,onClick:s,children:(0,r.jsx)("svg",{className:We,width:"22",height:"22",children:(0,r.jsx)("use",{href:d.Z+"#close_icon"})})}),(0,r.jsxs)("div",{className:Se,children:[(0,r.jsxs)("div",{className:ke,children:[(0,r.jsx)(de.J9,{initialValues:{product:u},children:(0,r.jsxs)(de.l0,{className:Fe,children:[(0,r.jsx)(de.gN,{as:e=>(0,r.jsx)("input",{className:Ie,type:"text",value:u,...e}),name:"product",value:u,className:Ie}),(0,r.jsx)(de.gN,{className:Be,type:"text",name:"weight",label:"grams",onChange:e=>{o(e.currentTarget.value)}})]})}),(0,r.jsx)("span",{className:De,children:"\u0433\u0440\u0430\u043c\u043c\u0438"})]}),(0,r.jsxs)("p",{className:fe,children:["\u041a\u0430\u043b\u043e\u0440\u0456\u0457:",(0,r.jsxs)("span",{className:Te,children:[" ",m||0]})]}),(0,r.jsxs)("div",{className:Ae,children:[(0,r.jsx)("button",{type:"submit",className:Le,onClick:e=>{e.preventDefault();const s={productId:_._id,amount:t,calories:m};i((0,Ze.VI)(s)),n(!!m)},children:"\u0414\u043e\u0434\u0430\u0442\u0438 \u0432 \u0449\u043e\u0434\u0435\u043d\u043d\u043d\u0438\u043a"}),(0,r.jsx)("button",{type:"button",className:Ee,onClick:s,children:"\u0412\u0456\u0434\u043c\u0456\u043d\u0430"})]})]})]})}),Re)};var Ue=t(9273);const Oe=()=>{const[e,s]=(0,c.useState)(window.innerWidth),[t,d]=(0,c.useState)(!1),[l,n]=(0,c.useState)(""),[i,_]=(0,c.useState)(!1),[u,m]=(0,c.useState)(!1),h=(0,a.I0)(),p=(0,a.v9)(k.getIsLoading),x=(0,a.v9)(k.getFilter);(0,c.useEffect)((()=>{const e=()=>{s(window.innerWidth)};return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),[]),(0,c.useEffect)((()=>{h((0,Ue.n6)())}),[h]),(0,c.useEffect)((()=>{const e={search:x,category:l};""!==Object.values(e).join("")?h(E.Z.getFilteredProducts(e)):h(E.Z.fetchProducts())}),[h,x,l]),(0,c.useEffect)((()=>{h(E.Z.fetchProductsCategories())}),[h]);return(0,r.jsxs)("div",{className:K,children:[e>=1440&&(0,r.jsx)("p",{className:ae,children:"\u0424\u0456\u043b\u044c\u0442\u0440\u0438"}),(0,r.jsxs)("div",{className:se,children:[(0,r.jsx)(o,{style:ee,title:"\u041f\u0440\u043e\u0434\u0443\u043a\u0442\u0438"}),(0,r.jsxs)("div",{className:re,children:[(0,r.jsx)(T,{categoryFilter:l}),(0,r.jsx)("div",{className:$,children:(0,r.jsx)(X,{onCategoryFilterSelect:e=>{n("all"!==e?e:"")},onTypeSelect:e=>{switch(e){case"recommended":_(!0),m(!0);break;case"not-recommended":_(!1),m(!0);break;default:_(!1),m(!1)}}})})]})]}),p?(0,r.jsx)(q._P,{height:"100",width:"100",color:"#e6533c",ariaLabel:"rings-loading",wrapperStyle:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"100vh"},wrapperClass:"",visible:!0,firstLineColor:"",middleLineColor:"",lastLineColor:""}):(0,r.jsx)("ul",{className:0===l.length?te:ce,children:(0,r.jsx)(I,{onOpenModal:e=>{const s=e.target.closest("li").dataset.id;h(E.Z.getProductById(s)),d(!0)},filterByRecommended:i,filterByBloodType:u})}),t&&(0,r.jsx)(ze,{onCloseModal:()=>{d(!1)}})]})}},5984:(e,s,t)=>{t.d(s,{x0:()=>c});let c=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:21;return crypto.getRandomValues(new Uint8Array(e)).reduce(((e,s)=>e+=(s&=63)<36?s.toString(36):s<62?(s-26).toString(36).toUpperCase():s>62?"-":"_"),"")}}}]);
//# sourceMappingURL=667.9d625042.chunk.js.map